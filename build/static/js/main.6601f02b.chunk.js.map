{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","services/phonebookService.js","App.js","index.js"],"names":["Filter","onChange","value","PersonForm","handleNameChange","newName","handleNumberChange","newNumber","handleSubmit","type","onClick","Person","person","deletePerson","name","number","e","Persons","persons","map","Notification","message","status","useState","show","setShow","useEffect","timer","setTimeout","clearTimeout","className","baseUrl","phonebookService","getAll","a","request","axios","get","response","data","create","newObject","post","update","id","put","delete","App","setPersons","setNewName","setNewNumber","search","setSearch","notification","setNotification","then","initialPhonebook","catch","error","preventDefault","find","p","window","confirm","updatedPerson","returnedPhonebook","includes","filter","personObject","concat","addPerson","personsToShow","toLowerCase","target","handleSearchChange","personToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6601f02b.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = ({ onChange, value }) => {\n  return (\n    <div>\n      filter shown with: <input onChange={onChange} value={value} />\n    </div>\n  )\n}\n\nexport default Filter\n","import React from 'react'\n\nconst PersonForm = ({\n  handleNameChange,\n  newName,\n  handleNumberChange,\n  newNumber,\n  handleSubmit,\n}) => {\n  return (\n    <form>\n      <div>\n        name: <input onChange={handleNameChange} value={newName} />\n      </div>\n      <div>\n        number: <input onChange={handleNumberChange} value={newNumber} />\n      </div>\n      <div>\n        <button type='submit' onClick={handleSubmit}>\n          add\n        </button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nconst Person = ({ person, deletePerson }) => {\n  return (\n    <div>\n      {person.name} {person.number}{' '}\n      <button onClick={e => deletePerson(person)}>Delete</button>\n    </div>\n  )\n}\n\nexport default Person\n","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({ persons, deletePerson }) => {\n  return (\n    <div>\n      {persons.map(person => (\n        <Person person={person} key={person.name} deletePerson={deletePerson} />\n      ))}\n    </div>\n  )\n}\n\nexport default Persons\n","import React, { useEffect, useState } from 'react'\n\nconst Notification = ({ message, status }) => {\n  const [show, setShow] = useState(false)\n\n  useEffect(() => {\n    setShow(true)\n    var timer = setTimeout(() => setShow(false), 2500)\n\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [message])\n\n  return (\n    <>\n      {show && message !== '' && (\n        <div className={`notification ${status}`}>{message}</div>\n      )}\n    </>\n  )\n}\n\nexport default Notification\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = async () => {\n  const request = axios.get(baseUrl)\n  const response = await request\n  return response.data\n}\n\nconst create = async newObject => {\n  const request = axios.post(baseUrl, newObject)\n  const response = await request\n  return response.data\n}\n\nconst update = async (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  const response = await request\n  return response.data\n}\n\nconst deletePerson = async id => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  const response = await request\n  return response.data\n}\n\nconst phonebookService = {\n  getAll,\n  create,\n  update,\n  deletePerson,\n}\n\nexport default phonebookService\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\nimport phonebookService from './services/phonebookService'\nimport './App.css'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [search, setSearch] = useState('')\n  const [notification, setNotification] = useState({\n    message: '',\n    status: '',\n  })\n\n  useEffect(() => {\n    phonebookService\n      .getAll()\n      .then(initialPhonebook => {\n        setPersons(initialPhonebook)\n      })\n      .catch(error => {\n        setNotification({\n          message: error,\n          status: 'error',\n        })\n      })\n  }, [])\n\n  const handleNameChange = e => {\n    setNewName(e.target.value)\n  }\n  const handleNumberChange = e => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleSearchChange = e => {\n    setSearch(e.target.value)\n  }\n\n  const addPerson = () => {\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n\n    phonebookService\n      .create(personObject)\n      .then(returnedPhonebook => {\n        setPersons(persons.concat(returnedPhonebook))\n        setNewName('')\n        setNewNumber('')\n\n        setNotification({\n          message: `Added ${returnedPhonebook.name}`,\n          status: 'success',\n        })\n      })\n      .catch(error => {\n        setNotification({\n          message: error.response.data.error,\n          status: 'error',\n        })\n      })\n  }\n\n  const deletePerson = personToDelete => {\n    const result = window.confirm(\n      `Do you really want to delete ${personToDelete.name}?`\n    )\n    if (result) {\n      phonebookService\n        .deletePerson(personToDelete.id)\n        .then(returnedPhonebook => {\n          setPersons(persons.filter(person => person.id !== personToDelete.id))\n          setNotification({\n            message: `the entry ${personToDelete.name} has been delete successfully`,\n            status: 'success',\n          })\n        })\n        .catch(error => {\n          setNotification({\n            message: `the entry ${personToDelete.name} has already been deleted from server`,\n            status: 'error',\n          })\n          setPersons(persons.filter(p => p.id !== personToDelete.id))\n        })\n    }\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault()\n\n    const person = persons.find(p => p.name === newName)\n    if (person) {\n      const result = window.confirm(\n        `${newName} is already added to the phonebook, replace the old number with the new one?`\n      )\n\n      if (result) {\n        const updatedPerson = { ...person, number: newNumber }\n        phonebookService\n          .update(updatedPerson.id, updatedPerson)\n          .then(returnedPhonebook => {\n            setPersons(\n              persons.map(person =>\n                person.id !== updatedPerson.id ? person : returnedPhonebook\n              )\n            )\n            setNotification({\n              message: `the entry ${returnedPhonebook.name} has been updated`,\n              status: 'success',\n            })\n          })\n          .catch(error => {\n            if (error.response.data.error.includes('Validation failed')) {\n              setNotification({\n                message: error.response.data.error,\n                status: 'error',\n              })\n            } else {\n              setNotification({\n                message: `the entry '${person.name}' has already been deleted from server`,\n                status: 'error',\n              })\n\n              setPersons(persons.filter(p => p.id !== updatedPerson.id))\n            }\n          })\n      }\n    } else {\n      addPerson()\n    }\n  }\n\n  const personsToShow =\n    search === ''\n      ? persons\n      : persons.filter(person =>\n          person.name.toLowerCase().includes(search.toLowerCase())\n        )\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification\n        message={notification.message}\n        status={notification.status}\n      />\n      <Filter onChange={e => handleSearchChange(e)} value={search} />\n\n      <h2>Add a New</h2>\n      <PersonForm\n        handleNameChange={e => handleNameChange(e)}\n        newName={newName}\n        handleNumberChange={e => handleNumberChange(e)}\n        newNumber={newNumber}\n        handleSubmit={e => handleSubmit(e)}\n      />\n\n      <h2>Numbers</h2>\n      <Persons persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}